language: java
before_install:
# maven-enforcer-plugin restrictions which work locally are simply ignored (-> great!), but failures occur nevertheless
- wget http://apache.lauf-forum.at//maven/maven-3/3.1.1/binaries/apache-maven-3.1.1-bin.tar.gz
- tar xf apache-maven-3.1.1-bin.tar.gz
- wget https://dl.google.com/dl/android/studio/ide-zips/2.2.2.0/android-studio-ide-145.3360264-linux.zip
- unzip -q android-studio-ide-145.3360264-linux.zip
# Need to update Android SDK in order to avoid `[ERROR] Failed to execute goal com.simpligility.maven.plugins:android-maven-plugin:4.1.1:generate-sources (default-generate-sources) on project javaocr-sampler: Execution default-generate-sources of goal com.simpligility.maven.plugins:android-maven-plugin:4.1.1:generate-sources failed: Error reading /home/travis/build/krichter722/javaocr/demos/sampler/android-studio/tools/source.properties -> [Help 1]`
- ( sleep 5 && while [ 1 ]; do sleep 1; echo y; done ) | ./android-studio/tools/android update sdk --no-ui --obsolete --force
install: /bin/true
script: env M2_HOME=./apache-maven-3.1.1 ANDROID_HOME=./android-studio ./apache-maven-3.1.1/bin/mvn verify -Dandroid.sdk.path=./android-studio
